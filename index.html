<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
	</head>
	<body>
			<h1>TEST CHATBOT</h1>

            <label for="espositoreId">Id Espositore:</label><br>
            <input type="text" id="espositoreId" name="Espositore Id">

            <br><br><br>
            <button onclick="buttonClick()">Inizializza Chat</button>

            <script type='text/javascript'>
                function buttonClick() {
                    const espositoreId = document.getElementById("espositoreId").value;

                    console.log('Espositore Id:', espositoreId)
                    initEmbeddedMessaging(espositoreId)
                }
            </script>

			<script type='text/javascript'>
				function initEmbeddedMessaging(espositoreId) {
					try {
						embeddedservice_bootstrap.settings.language = 'it'; // For example, enter 'en' or 'en-US'

                        window.addEventListener("onEmbeddedMessagingReady", () => {            
                            console.log( "Inside Prechat API!!" );
                            embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields( { "EspositoreId" : espositoreId } );
                        });
			
						embeddedservice_bootstrap.init(
							'00D5t0000008hjC',
							'IEG_Chat',
							'https://iegexpo--uat.sandbox.my.site.com/ESWIEGChat1719926059932',
							{
								scrt2URL: 'https://iegexpo--uat.sandbox.my.salesforce-scrt.com'
							}
						);
					} catch (err) {
						console.error('Error loading Embedded Messaging: ', err);
					}
				};
			</script>
			<script type='text/javascript' src='https://iegexpo--uat.sandbox.my.site.com/ESWIEGChat1719926059932/assets/js/bootstrap.min.js'></script>
	</body>
</html>
