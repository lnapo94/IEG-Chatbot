<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
	</head>
	<body>
            <h1>TEST CHATBOT</h1>

	    <label for="recordTypeId">Record Type Id:</label><br>
            <input type="text" id="recordTypeId" name="Record Type Id" value="012MB000000EPJVYA4">
	    <br><br>

            <label for="espositoreId">Codice SIA Espositore:</label><br>
            <input type="text" id="espositoreId" name="Espositore Id" value="0097527">
            <br><br>

            <label for="edizione">Codice Edizione:</label><br>
            <input type="text" id="edizione" name="Codice Edizione" value="WEL24">
	    <br><br>

	    <label for="nomeCognome">Nome e Cognome:</label><br>
            <input type="text" id="nomeCognome" name="Nome e Cognome" value="Test Example">
	    <br><br>

	    <label for="profilo">Profilo:</label><br>
            <input type="text" id="profilo" name="Profilo" value="Master">
	    <br><br>

	    <label for="lingua">Lingua:</label><br>
            <input type="text" id="lingua" name="Lingua Area Riservata" value="it">
	    <br><br>

	    <label for="email">Email:</label><br>
            <input type="text" id="email" name="Email" value="test@example.com">
	    <br><br>

	    <label for="numeroPratica">Numero Pratica:</label><br>
            <input type="text" id="numeroPratica" name="Numero Pratica" value="123456789">
	    <br><br>

	    <label for="posizioneStand">Posizione & Stand:</label><br>
            <input type="text" id="posizioneStand" name="Posizione e Stand" value="P1 - 4">

            <br><br><br>
            <button onclick="buttonClick()" id="button">Inizializza Chat</button>

            <script type='text/javascript'>
                function buttonClick() {
                    const recordTypeId = document.getElementById("recordTypeId").value;
                    const espositoreId = document.getElementById("espositoreId").value;
                    const edizione = document.getElementById("edizione").value;
                    const nomeCognome = document.getElementById("nomeCognome").value;
                    const profilo = document.getElementById("profilo").value;
                    const lingua = document.getElementById("lingua").value;
                    const email = document.getElementById("email").value;
                    const numeroPratica = document.getElementById("numeroPratica").value;
                    const posizioneStand = document.getElementById("posizioneStand").value;

		    console.log('Record Type Id:', recordTypeId)
                    console.log('Espositore Id:', espositoreId)
                    console.log('Codice Edizione:', codiceEdizione)
		    console.log('Nome e Cognome:', nomeCognome)
                    console.log('Profilo:', profilo)
                    console.log('Lingua:', lingua)
		    console.log('Email:', email)
                    console.log('Numero Pratica:', numeroPratica)
                    console.log('Posizione e Stand:', posizioneStand)

                    initEmbeddedMessaging(espositoreId, codiceEdizione)
                }
            </script>

			<script type='text/javascript'>
				function initEmbeddedMessaging(espositoreId, codiceEdizione) {
					try {
						embeddedservice_bootstrap.settings.language = 'it'; // For example, enter 'en' or 'en-US'

                        window.addEventListener("onEmbeddedMessagingReady", () => {            
                            console.log( "Inside Prechat API!!" );
                            embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields( { 
				    "CaseRecordTypeId" : recordTypeId, 
				    "CodiceEdizione": codiceEdizione,
				    "CodiceSIAEspositore" : espositoreId, 
				    "NomeCognome": nomeCognome,
				    "Profilo" : profilo, 
				    "Lingua": lingua,
				    "Email" : email, 
				    "NumeroPratica": numeroPratica,
				    "PosizioneStand": posizioneStand
			    } );
                        });
			
						embeddedservice_bootstrap.init(
							'00D5t0000008hjC',
							'IEG_Chat',
							'https://iegexpo--uat.sandbox.my.site.com/ESWIEGChat1719926059932',
							{
								scrt2URL: 'https://iegexpo--uat.sandbox.my.salesforce-scrt.com'
							}
						);
                        document.getElementById("button").style = 'display: none';
					} catch (err) {
						console.error('Error loading Embedded Messaging: ', err);
					}
				};
			</script>
			<script type='text/javascript' src='https://iegexpo--uat.sandbox.my.site.com/ESWIEGChat1719926059932/assets/js/bootstrap.min.js'></script>
	</body>
</html>
